"use strict";(self.webpackChunkhelp_book=self.webpackChunkhelp_book||[]).push([[947],{7947:(e,s,n)=>{n.r(s),n.d(s,{default:()=>re});var t=n(8536),i=n(2791),r=n(4270),o=n(3934),a=n(4705),l=n(2559),d=n(8454),c=n(9631),x=n(6341),h=n(5379),g=n(4217),p=n(634),u=n(7769),j=n(6355),m=n(1087),f=n(9309),y=n(8014);const S=(e,s)=>{const n=/^([a-zA-Z]+)(\d+)$/,[,t,i]=e.name.match(n)||[],[,r,o]=s.name.match(n)||[],a=t.localeCompare(r);return 0!==a?a:parseInt(i,10)-parseInt(o,10)};var b=n(6856),C=n(6692),v=n(8466),w=n(184);const k=e=>{let{filters:s,isGridView:n}=e;const{search:t,typeCars:r,drivingStyle:o,hasAirConditioner:a,hasFridge:l,hasHeating:k,hasSoundProofed:I}=s,[H,A]=(0,i.useState)([]);console.log("cars",H);const[P,F]=(0,i.useState)(!0);return(0,i.useEffect)((()=>{const e=(0,c.hJ)(d.db,"cars"),s=(0,c.cf)(e,(e=>{const s=e.docs.map((e=>({id:e.id,...e.data()}))).filter((e=>{const s=e.name.includes(t),n=!r||e.type===r,i=!o||e.drivingStyle===o,d=!a||!0===e.hasAirConditioner,c=!l||!0===e.hasFridge,x=!k||!0===e.hasHeating,h=!I||!0===e.hasSoundProofed;return s&&n&&d&&c&&i&&x&&h}));A(s),F(!1)}));return()=>s()}),[r,o,a,l,t,k,I]),n?(0,w.jsx)(x.r,{pb:4,w:"100%",templateColumns:{base:"repeat(4, 1fr)",md:"repeat(6, 1fr)",xl:"repeat(10, 1fr)"},gap:{base:1,md:6,xl:2},flex:1,overflow:"auto",className:"no-scrollbar",children:H.sort(((e,s)=>S(e,s))).map((e=>(0,w.jsx)(m.rU,{to:"/cars/".concat(e.id),children:(0,w.jsxs)(h.k,{w:"100%",flexDirection:"column",alignItems:"center",justify:"space-between",gap:1,p:{base:0,md:3},borderWidth:1,borderRadius:"md",boxShadow:"md",bg:(0,f.S)(e.drivingStyle),children:[(0,w.jsx)(g.x,{fontWeight:"bold",fontSize:14,children:e.name}),(0,w.jsxs)(p.x,{display:"flex",gap:1,children:[(0,w.jsx)(p.x,{display:"flex",alignItems:"center",children:(0,w.jsx)(j.l51,{color:e.hasAirConditioner?"green":"red"})}),"hasHeating"in e&&(0,w.jsx)(p.x,{display:"flex",alignItems:"center",children:(0,w.jsx)(y.$b7,{color:e.hasHeating?"green":"red"})}),(0,w.jsx)(p.x,{display:"flex",alignItems:"center",children:(0,w.jsx)(j.FSC,{color:e.hasFridge?"green":"red"})}),"hasSoundProofed"in e&&(0,w.jsx)(p.x,{display:"flex",alignItems:"center",children:(0,w.jsx)(b.HvK,{color:e.hasSoundProofed?"green":"red"})})]})]})},e.id)))}):(0,w.jsx)(x.r,{pb:4,w:"100%",templateColumns:{base:"repeat(1, 1fr)",md:"repeat(3, 1fr)"},gap:{base:3,md:6},flex:1,overflow:"auto",className:"no-scrollbar",children:H.sort(((e,s)=>S(e,s))).map((e=>(0,w.jsx)(m.rU,{to:"/cars/".concat(e.id),children:(0,w.jsxs)(h.k,{w:"100%",alignItems:"center",justify:"space-between",gap:4,p:{base:1,md:3},borderWidth:1,borderRadius:"md",boxShadow:"md",bg:(0,f.S)(e.drivingStyle),children:[(0,w.jsx)(g.x,{fontWeight:"bold",fontSize:"lg",children:e.name}),(0,w.jsxs)(p.x,{display:"flex",gap:1,children:[(0,w.jsx)(p.x,{display:"flex",alignItems:"center",children:(0,w.jsx)(j.l51,{color:e.hasAirConditioner?"green":"red"})}),"hasHeating"in e&&(0,w.jsx)(p.x,{display:"flex",alignItems:"center",children:(0,w.jsx)(y.$b7,{color:e.hasHeating?"green":"red"})}),(0,w.jsx)(p.x,{display:"flex",alignItems:"center",children:(0,w.jsx)(j.FSC,{color:e.hasFridge?"green":"red"})}),"hasSoundProofed"in e&&(0,w.jsx)(p.x,{display:"flex",alignItems:"center",children:(0,w.jsx)(b.HvK,{color:e.hasSoundProofed?"green":"red"})}),(0,w.jsx)(p.x,{display:"flex",alignItems:"center",px:1,children:(0,w.jsx)(g.x,{fontSize:22,children:e.drivingStyle})}),(0,w.jsxs)(p.x,{position:"relative",display:"flex",alignItems:"flex-end",gap:1,children:[(0,w.jsx)(u.J,{as:C.k,boxSize:7,color:v.Z.primary}),(0,w.jsx)(g.x,{position:"absolute",top:1,left:2.5,fontSize:"16px",color:"gray.700",fontWeight:"medium",children:5})]})]})]})},e.id)))})};var I=n(5660),H=n(6511),A=n(4295),P=n(1091),F=n(9271),z=n(7186),O=n(5908),T=n(2571),R=n(6486),E=n(9168),M=n(71),B=n(8906),V=n(9848),W=n(8052),G=n(70);const _=e=>{let{isOpenFilterMobMenu:s,setIsOpenFilterMobMenu:n,search:t,setSearch:i,typeCars:r,setTypeCars:o,hasAirConditioner:a,setHasAirConditioner:l,hasFridge:d,setHasFridge:c,setIsOpenModalAddCar:x,isGridView:g,setIsGridView:m,hasHeating:f,setHasHeating:S,hasSoundProofed:C,setHasSoundProofed:v,setIsOpenModalScan:k}=e;const _=e=>{o(e)};return(0,w.jsxs)(h.k,{gap:2,position:"sticky",zIndex:"2",paddingBottom:"10px",bg:"#fff",children:[(0,w.jsx)(I.h,{color:"#6da305",icon:(0,w.jsx)(M.Y0M,{}),onClick:()=>k(!0),"aria-label":"Open Modal Add Cars",position:"relative"}),(0,w.jsxs)(H.B,{children:[(0,w.jsx)(A.Z,{pointerEvents:"none",children:(0,w.jsx)(M.eaK,{color:"gray.300"})}),(0,w.jsx)(P.I,{w:{base:"100%",md:"300px",xl:"500px"},value:t,onChange:e=>{i(e.target.value.toUpperCase())},placeholder:"Search"})]}),(0,w.jsx)(W.Z,{isGridView:g,setIsGridView:m}),(0,w.jsxs)(p.x,{display:{base:"flex",xl:"none"},gap:2,children:[(0,w.jsx)(I.h,{icon:s?(0,w.jsx)(j.s$2,{}):(0,w.jsx)(j.ulB,{}),onClick:()=>{n(!s)},"aria-label":"Open Filter Menu",position:"relative"}),(0,w.jsx)(I.h,{bg:"#6da305",color:"white",_hover:{bg:"#5c8e04"},icon:(0,w.jsx)(B.d,{}),onClick:()=>x(!0),"aria-label":"Open Modal Add Cars",position:"relative"})]}),(0,w.jsx)(p.x,{display:{base:"none",xl:"block"},children:(0,w.jsxs)(h.k,{gap:4,align:"center",children:[(0,w.jsxs)(F.v,{children:[(0,w.jsx)(z.j,{as:O.z,rightIcon:(0,w.jsx)(V.v,{}),w:"80px",children:r||"Type"}),(0,w.jsxs)(T.q,{minW:"80px",children:[(0,w.jsx)(R.s,{onClick:()=>_(""),children:"Type"}),G.TYPES_CAR.map(((e,s)=>(0,w.jsx)(R.s,{onClick:()=>_(e),children:e},s)))]})]}),(0,w.jsxs)(h.k,{align:"center",children:[(0,w.jsx)(u.J,{as:j.l51,boxSize:5,mr:2,color:a?"green.500":"gray.500"}),(0,w.jsx)(E.r,{colorScheme:"green",isChecked:a,onChange:()=>l(!a)})]}),(0,w.jsxs)(h.k,{align:"center",children:[(0,w.jsx)(u.J,{as:y.$b7,boxSize:5,mr:2,color:f?"green.500":"gray.500"}),(0,w.jsx)(E.r,{colorScheme:"green",isChecked:f,onChange:()=>S(!f)})]}),(0,w.jsxs)(h.k,{align:"center",children:[(0,w.jsx)(u.J,{as:j.FSC,boxSize:5,mr:2,color:d?"green.500":"gray.500"}),(0,w.jsx)(E.r,{colorScheme:"green",isChecked:d,onChange:()=>c(!d)})]}),(0,w.jsxs)(h.k,{align:"center",children:[(0,w.jsx)(u.J,{as:b.HvK,boxSize:5,mr:2,color:C?"green.500":"gray.500"}),(0,w.jsx)(E.r,{colorScheme:"green",isChecked:C,onChange:()=>v(!C)})]}),(0,w.jsx)(O.z,{leftIcon:(0,w.jsx)(B.d,{}),bg:"#6da305",color:"white",_hover:{bg:"#5c8e04"},onClick:()=>x(!0),children:"p\u0159idat auto"})]})})]})};var J=n(9335),Z=n(5739),D=n(6443),K=n(1709),N=n(9370),X=n(6790),$=n(4164);const q=e=>{let{imageSrc:s,annotations:n}=e;const[t,r]=(0,i.useState)([]),o=(0,i.useRef)(null);console.log("carList",t),(0,i.useEffect)((()=>{const e=o.current;e&&(e.style.position="relative",e.style.display="inline-block")}),[]),(0,i.useEffect)((()=>{n&&n.length>0&&(async()=>{try{console.log("annotations",n);const e=await Promise.all(n.map((async e=>{const s=e.description.replace(/\s+/g,""),n=await(0,l.getCarByName)(s);return n?{data:n,annotation:e}:null})));r(e.filter((e=>null!==e)))}catch(e){console.error("Error fetching car data:",e)}})()}),[n]);return(0,w.jsxs)(p.x,{ref:o,children:[(0,w.jsx)("img",{src:s,alt:"Annotated",style:{maxWidth:"100%",maxHeight:"100%",display:"block",borderRadius:"8px"}}),t.map(((e,s)=>{var n,t;console.log("car",e);const i=null===e||void 0===e||null===(n=e.annotation)||void 0===n||null===(t=n.boundingPoly)||void 0===t?void 0:t.vertices;if(!i)return(0,w.jsx)("div",{},s);const r=i[0].x,o=i[0].y,a=i[1].x-i[0].x,l=i[2].y-i[0].y,d=(e=>{const s=e[1].x-e[0].x,n=e[1].y-e[0].y;return 180*Math.atan2(n,s)/Math.PI})(i);return(0,w.jsx)(m.rU,{to:"/cars/".concat(e.data.id),children:(0,w.jsx)(p.x,{position:"absolute",left:"".concat(r,"px"),top:"".concat(o,"px"),width:"".concat(a,"px"),height:"".concat(l,"px"),transform:"rotate(".concat(d,"deg)"),background:"rgba(255, 255, 255, 0.8)",border:"2px solid ".concat((0,f.S)(e.data.drivingStyle)),padding:"8px",borderLeftRadius:"8px",borderBottomRightRadius:"8px",zIndex:10,bg:"transparent",children:(0,w.jsxs)(h.k,{w:"fit-content",alignItems:"center",justify:"space-between",gap:1,position:"absolute",top:"-28px",right:"-2px",bg:(0,f.S)(e.data.drivingStyle),p:"3px",borderTopRadius:"3px",children:[(0,w.jsxs)(g.x,{fontWeight:"bold",fontSize:14,children:[e.data.name," (",e.data.drivingStyle,")"]}),(0,w.jsxs)(p.x,{display:"flex",gap:1,children:[(0,w.jsx)(p.x,{display:"flex",alignItems:"center",children:(0,w.jsx)(j.l51,{color:e.data.hasAirConditioner?"green":"red"})}),"hasHeating"in e.data&&(0,w.jsx)(p.x,{display:"flex",alignItems:"center",children:(0,w.jsx)(y.$b7,{color:e.data.hasHeating?"green":"red"})}),(0,w.jsx)(p.x,{display:"flex",alignItems:"center",children:(0,w.jsx)(j.FSC,{color:e.data.hasFridge?"green":"red"})}),"hasSoundProofed"in e.data&&(0,w.jsx)(p.x,{display:"flex",alignItems:"center",children:(0,w.jsx)(b.HvK,{color:e.data.hasSoundProofed?"green":"red"})})]})]})})},s)}))]},"132")};var U=n(97),Y=n.n(U);const L=e=>{let{onRecognized:s}=e;const n=(0,i.useRef)(null),[t,r]=(0,i.useState)(null),[o,a]=(0,i.useState)(null);return(0,w.jsx)(h.k,{justify:"center",align:"center",height:{base:"calc(100vh - 140px)",md:"calc(100vh - 110px)"},position:"relative",children:t?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(q,{imageSrc:t,annotations:o}),(0,w.jsx)("button",{onClick:()=>r(null),style:{position:"absolute",bottom:"10px",width:"50px",height:"50px",borderRadius:"30px",backgroundColor:"gray",boxShadow:"0px 0px 5px 2px #fff inset"}})]}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(Y(),{audio:!1,ref:n,videoConstraints:{facingMode:"environment"},screenshotFormat:"image/jpeg",style:{maxWidth:"100%",maxHeight:"100%",borderRadius:"8px"}}),(0,w.jsx)("button",{onClick:async()=>{const e=n.current.getScreenshot();r(e);try{var t;const n=await fetch("https://vision.googleapis.com/v1/images:annotate?key=".concat("AIzaSyAwEsPlXORwj3zcWO0nI0aC5SpnmgBuhVU"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({requests:[{image:{content:e.split(",")[1]},features:[{type:"TEXT_DETECTION"}]}]})}),i=await n.json();console.log("result",i);const[r,...o]=null===i||void 0===i||null===(t=i.responses[0])||void 0===t?void 0:t.textAnnotations,l=o?o.map((e=>"".concat(e.description,", "))):"\u0422\u0435\u043a\u0441\u0442 \u043d\u0435 \u0440\u043e\u0437\u043f\u0456\u0437\u043d\u0430\u043d\u043e";console.log("detectedText",l),a(o),s(l)}catch(i){console.error("Error with Vision API:",i),alert("\u0421\u0442\u0430\u043b\u0430\u0441\u044f \u043f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0440\u043e\u0437\u043f\u0456\u0437\u043d\u0430\u0432\u0430\u043d\u043d\u0456 \u0442\u0435\u043a\u0441\u0442\u0443.")}},style:{position:"absolute",bottom:"10px",width:"50px",height:"50px",borderRadius:"30px",backgroundColor:"gray"}})]})})},Q=e=>{let{isOpen:s,onClose:n}=e;const[t,r]=(0,i.useState)([]);return(0,i.useEffect)((()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow=""})),[]),(0,$.createPortal)((0,w.jsxs)(J.u_,{motionPreset:"slideInBottom",isOpen:s,onClose:n,size:"full",isCentered:!0,scrollBehavior:"inside",children:[(0,w.jsx)(Z.Z,{}),(0,w.jsxs)(D.h,{mt:20,borderTopRadius:20,children:[(0,w.jsxs)(K.x,{children:["Real-Time OCR Scanner Text: ",t]}),(0,w.jsx)(N.o,{}),(0,w.jsx)(X.f,{p:0,h:"100%",children:(0,w.jsx)(L,{onRecognized:e=>{r((s=>[...s,e]))}})})]})]}),document.getElementById("modalScan"))};var ee=n(7689),se=n(4315),ne=n(3215);const te=n(8842).E.create(p.x),ie=e=>{let{isOpen:s,onClose:n,typeCars:t,setTypeCars:r,drivingStyle:o,setDrivingStyle:a,hasAirConditioner:l,setHasAirConditioner:d,hasFridge:c,setHasFridge:x,hasHeating:h,setHasHeating:g,hasSoundProofed:u,setHasSoundProofed:j}=e;const[m,f]=(0,i.useState)(0),y=(0,i.useRef)();(0,i.useEffect)((()=>{const e=e=>{y.current&&!y.current.contains(e.target)&&n()};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[n]);return(0,w.jsx)(p.x,{display:{base:"block",xl:"none"},ref:y,children:(0,w.jsxs)(te,{initial:{top:"-100%"},animate:s?{top:"40px"}:{top:"-100%"},style:{pointerEvents:s?"auto":"none"},overflow:"hidden",position:"absolute",top:"40px",left:"0",width:"100%",bg:"white",zIndex:"1",boxShadow:"md",p:s?4:0,onTouchStart:e=>{f(e.touches[0].clientY)},onTouchEnd:e=>{const s=e.changedTouches[0].clientY;m-s>50&&n()},transition:{top:{duration:.6},opacity:{duration:.8}},children:[(0,w.jsxs)(se.g,{align:"start",spacing:4,children:[(0,w.jsxs)(F.v,{children:[(0,w.jsx)(z.j,{as:O.z,rightIcon:(0,w.jsx)(V.v,{}),w:"100%",children:t||"Typ auta:"}),(0,w.jsxs)(T.q,{w:"100%",children:[(0,w.jsx)(R.s,{w:"100%",onClick:()=>r(""),children:"V\u0161e"}),G.TYPES_CAR.map(((e,s)=>(0,w.jsx)(R.s,{onClick:()=>r(e),children:e},s)))]})]}),(0,w.jsxs)(F.v,{children:[(0,w.jsx)(z.j,{as:O.z,rightIcon:(0,w.jsx)(V.v,{}),w:"100%",children:o||"Styl j\xedzdy:"}),(0,w.jsxs)(T.q,{w:"100%",children:[(0,w.jsx)(R.s,{w:"100%",onClick:()=>a(""),children:"V\u0161e"}),(0,w.jsx)(R.s,{w:"100%",onClick:()=>a("A"),children:"A"}),(0,w.jsx)(R.s,{w:"100%",onClick:()=>a("B"),children:"B"}),(0,w.jsx)(R.s,{w:"100%",onClick:()=>a("C"),children:"C"}),(0,w.jsx)(R.s,{w:"100%",onClick:()=>a("A/B"),children:"A/B"}),(0,w.jsx)(R.s,{w:"100%",onClick:()=>a("0"),children:"0"})]})]}),(0,w.jsx)(ne.X,{name:"hasAirConditioner",isChecked:l,onChange:()=>{d((e=>!e))},children:"Klimatizace"}),(0,w.jsx)(ne.X,{name:"hasHeating",isChecked:h,onChange:()=>{g((e=>!e))},children:"Topen\xed:"}),(0,w.jsx)(ne.X,{name:"hasFridge",isChecked:c,onChange:()=>x((e=>!e)),children:"Vestavba (ledni\u010dka)"}),(0,w.jsx)(ne.X,{name:"hasSoundProofed",isChecked:u,onChange:()=>j((e=>!e)),children:"Odhlu\u010dn\u011bn\xe9"})]}),(0,w.jsx)(O.z,{bgColor:"#6da305",color:"white",mt:4,w:"100%",onClick:n,children:"Pou\u017e\xedt filtry"})]})})},re=()=>{const[e,s]=(0,i.useState)(!1),[n,d]=(0,i.useState)(!1),[c,x]=(0,i.useState)(!1),[h,g]=(0,i.useState)(""),[p,u]=(0,i.useState)(""),[j,m]=(0,i.useState)(!1),[f,y]=(0,i.useState)(!1),[S,b]=(0,i.useState)(""),[C,v]=(0,i.useState)(!1),[I,H]=(0,i.useState)(!1),[A,P]=(0,i.useState)(!1);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(r.q,{children:(0,w.jsx)("title",{children:"Cars"})}),(0,w.jsx)(ee.j3,{}),(0,w.jsxs)(t.W,{w:"100%",maxW:{base:"100%",md:"95vw",xl:"80vw"},p:0,position:"relative",height:"calc(100% - 65px)",display:"flex",flexDirection:"column",overflow:"hidden",children:[(0,w.jsx)(ie,{isOpen:e,onClose:()=>s(!1),typeCars:p,setTypeCars:u,drivingStyle:S,setDrivingStyle:b,hasAirConditioner:j,setHasAirConditioner:m,hasFridge:f,setHasFridge:y,hasHeating:I,setHasHeating:H,hasSoundProofed:A,setHasSoundProofed:P}),(0,w.jsx)(_,{isOpenFilterMobMenu:e,setIsOpenFilterMobMenu:s,search:h,setSearch:g,typeCars:p,setTypeCars:u,drivingStyle:S,setDrivingStyle:b,hasAirConditioner:j,setHasAirConditioner:m,hasFridge:f,setHasFridge:y,setIsOpenModalAddCar:d,isGridView:C,setIsGridView:v,hasHeating:I,setHasHeating:H,hasSoundProofed:A,setHasSoundProofed:P,setIsOpenModalScan:x}),(0,w.jsx)(k,{filters:{search:h,typeCars:p,drivingStyle:S,hasAirConditioner:j,hasHeating:I,hasFridge:f,hasSoundProofed:A},isGridView:C})]}),n&&(0,w.jsx)(o.Z,{isOpen:n,onClose:()=>d(!1),children:(0,w.jsx)(a.Z,{onSubmit:async e=>{await(0,l.addsNewCar)(e),d(!1)}})}),c&&(0,w.jsx)(Q,{isOpen:c,onClose:()=>x(!1)})]})}}}]);
//# sourceMappingURL=947.1f584516.chunk.js.map